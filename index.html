<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Invoice - Trader Brothers Ltd</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <div class="invoice-container">
    <!-- Header -->
    <div class="header">
      <div class="company-info">
        <div class="company-name">TR<span class="highlight">A</span>DER BROTHERS LTD</div>
        <div class="company-details">
          123 Business Park, Hillington<br>
          Glasgow, G52 4XZ, Scotland<br>
          07448835577<br>
          info@traderbrothers.co.uk
        </div>
      </div>
      <div class="logo-container">
        <img src="https://github.com/infotraderbrothers-lgtm/traderbrothers-assets-logo/blob/main/Trader%20Brothers.png?raw=true" alt="Trader Brothers Logo" class="logo">
      </div>
    </div>

    <!-- Invoice Banner -->
    <div class="invoice-banner">INVOICE</div>

    <!-- Client Info and Invoice Details -->
    <div class="info-section">
      <div class="client-info">
        <h3>BILL TO:</h3>
        <p>
          <strong>ABC Construction Ltd</strong><br>
          123 High Street<br>
          Edinburgh<br>
          EH1 1AA
        </p>
      </div>

      <div class="invoice-details">
        <table class="details-table">
          <tr>
            <td class="detail-label">Invoice #:</td>
            <td class="detail-value">INV-2025-001</td>
          </tr>
          <tr>
            <td class="detail-label">Invoice Date:</td>
            <td class="detail-value">20/01/2025</td>
          </tr>
          <tr>
            <td class="detail-label">Due Date:</td>
            <td class="detail-value">27/01/2025</td>
          </tr>
          <tr>
            <td class="detail-label">Estimate #:</td>
            <td class="detail-value">EST-202412-001</td>
          </tr>
          <tr>
            <td class="detail-label">Project:</td>
            <td class="detail-value">Office Refurbishment</td>
          </tr>
        </table>
      </div>
    </div>

    <!-- Milestone Information -->
    <div class="milestone-section">
      <div class="milestone-number">2</div>
      <div class="milestone-content">
        <div class="milestone-title">Milestone 2: Demolition & First Fix Complete</div>
        <div class="milestone-description">
          Payment for completion of all demolition works, strip out, and first fix electrical and plumbing installations. Site inspection completed and signed off on 20/01/2025.
        </div>
      </div>
    </div>

    <!-- Items Table -->
    <table class="items-table">
      <thead>
        <tr>
          <th>Description</th>
          <th class="right-align">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <strong>Milestone Payment 2 - Demolition & First Fix Complete</strong><br>
            <span style="font-size: 11px; color: #999;">20% of total contract value as per payment schedule dated 06/12/2024</span>
          </td>
          <td class="right-align">£4,602.16</td>
        </tr>
      </tbody>
    </table>

    <!-- Totals Section -->
    <div class="totals-section">
      <div class="totals-table">
        <div class="totals-row subtotal">
          <span>Subtotal</span>
          <span>£4,602.16</span>
        </div>
        <div class="totals-row">
          <span>VAT (20%)</span>
          <span>£920.43</span>
        </div>
        <div class="totals-row total">
          <span>Amount Due</span>
          <span class="amount">£5,522.59</span>
        </div>
      </div>
    </div>

    <!-- Payment Section -->
    <div class="payment-section">
      <div id="paymentInitial">
        <h3>Ready to Pay?</h3>
        <p>Click the button below to securely pay your invoice online</p>
        <div class="payment-due-amount">£5,522.59</div>
        <button class="pay-now-button" id="payNowButton">PAY NOW</button>
        <div class="payment-terms">Payment due by 27/01/2025 • Invoice #INV-2025-001</div>
      </div>

      <!-- Payment Form (Hidden Initially) -->
      <div class="payment-form-container" id="paymentFormContainer">
        <div class="payment-form">
          <h3 style="text-align: center; margin-bottom: 20px; color: #333;">Complete Your Payment</h3>
          
          <div class="form-group">
            <label for="cardholderName">Cardholder Name</label>
            <input type="text" id="cardholderName" placeholder="John Smith" required>
          </div>

          <div class="form-group">
            <label for="cardholderEmail">Email Address</label>
            <input type="email" id="cardholderEmail" placeholder="john@example.com" required>
          </div>

          <div class="form-group">
            <label for="card-element">Card Details</label>
            <div id="card-element"></div>
            <div id="card-errors"></div>
          </div>

          <button class="submit-payment-button" id="submitPayment">
            Pay £5,522.59
          </button>

          <div class="secure-badge">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg>
            Secured by Stripe - Your payment information is encrypted and secure
          </div>

          <a class="cancel-payment" id="cancelPayment">Cancel and return to invoice</a>
        </div>
      </div>

      <!-- Success Message (Hidden Initially) -->
      <div class="success-message" id="successMessage">
        <h3>✓ Payment Successful!</h3>
        <p>Thank you for your payment. A confirmation email has been sent to your email address.</p>
        <p style="margin-top: 15px; font-size: 13px;"><strong>Transaction ID:</strong> <span id="transactionId"></span></p>
      </div>
      <div style="margin-top: 30px; padding-top: 25px; border-top: 1px solid #e0e0e0;">
        <p style="font-size: 13px; color: #333; margin-bottom: 12px; font-weight: bold;">Payment Information</p>
        <p style="font-size: 12px; color: #666; margin-bottom: 8px;"><strong>Payment Terms:</strong> Due within 7 days of invoice date (27/01/2025)</p>
        <p style="font-size: 12px; color: #666; margin-bottom: 0;"><strong>Payment Methods:</strong> Bank Transfer (preferred), Cheque, or Card (surcharge may apply)</p>
      </div>
    </div>

    <!-- Payment Success Overlay -->
    <div class="payment-overlay" id="paymentOverlay">
      <!-- Big Green Tick (shown first) -->
      <div id="checkmarkContainer">
        <svg class="success-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
          <circle class="success-checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
          <path class="success-checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
        </svg>
      </div>

      <!-- Thank You Screen (shown after tick animation) -->
      <div class="thank-you-screen" id="thankYouScreen">
        <img src="https://github.com/infotraderbrothers-lgtm/traderbrothers-assets-logo/blob/main/Trader%20Brothers.png?raw=true" alt="Trader Brothers Logo" class="thank-you-logo">
        
        <div class="thank-you-company-name">TR<span class="highlight">A</span>DER BROTHERS LTD</div>
        
        <div class="thank-you-title">Payment Successful!</div>
        
        <div class="thank-you-message">
          Thank you for your payment. Your transaction has been completed successfully and a confirmation email has been sent to your inbox.
        </div>

        <div class="payment-details-box">
          <h4>Payment Details</h4>
          <div class="detail-row">
            <span class="detail-label">Invoice Number:</span>
            <span class="detail-value">INV-2025-001</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Transaction ID:</span>
            <span class="detail-value" id="transactionIdDisplay"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Date:</span>
            <span class="detail-value" id="paymentDate"></span>
          </div>
          <div class="detail-row highlight">
            <span class="detail-label">Amount Paid:</span>
            <span class="detail-value">£5,522.59</span>
          </div>
        </div>

        <button class="close-button" id="closeOverlay">Close</button>

        <div class="confirmation-note">
          A receipt has been sent to your email address
        </div>
      </div>
    </div>

    <!-- Footer Note -->
    <div class="footer-note">
      If you have any questions about this invoice, please contact<br>
      Trader Brothers on 07448835577 or info@traderbrothers.co.uk
      <div class="thank-you">Thank you for your business</div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
